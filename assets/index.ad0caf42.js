var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,n=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l,o=(e,t)=>{for(var a in t||(t={}))s.call(t,a)&&n(e,a,t[a]);if(l)for(var a of l(t))m.call(t,a)&&n(e,a,t[a]);return e},c=(e,l)=>t(e,a(l));import{c as r,R as i,L as g,u as d,r as p,a as u,w as b,S as E,f as h,b as y,B as v,d as N,e as f,g as k,h as I,P as w}from"./vendor.3d84330c.js";var x={apiKey:"AIzaSyDnb7CnJxySsm2_w1Yq1l3ZlsRsN2qe16c",authDomain:"collectio-photo-2233e.firebaseapp.com",projectId:"collectio-photo-2233e",storageBucket:"collectio-photo-2233e.appspot.com",messagingSenderId:"590643802391",appId:"1:590643802391:web:ad661fba7fb099ca018752",measurementId:"G-X7DEP88WR5"};const j=r({name:"user",initialState:{user:null},reducers:{setUser:(e,t)=>{e.user=t.payload}}}),{setUser:P}=j.actions,O=e=>e.userReducer.user;var $=j.reducer;const R=r({name:"albums",initialState:{albums:[]},reducers:{addAlbums:(e,t)=>{e.albums.push(t.payload)}}}),{addAlbums:S}=R.actions,C=e=>e.albumsReducer.albums;var A=R.reducer;const D=e=>i.createElement("div",{id:"home"},i.createElement("nav",null,i.createElement(g,{to:"/"},i.createElement("img",{className:"logo",src:"/collectio.svg",alt:"Collectio"}))),i.createElement("div",{className:"login"},i.createElement("h2",null,"Collectio Photoへようこそ"),i.createElement("p",null,"このアプリは、ボードゲームを遊んだ時の写真をアルバムにまとめて、遊んだゲームを記録できるアプリです。",i.createElement("br",null),i.createElement("br",null),"「この前、あの時、遊んだゲームはなんだった？」",i.createElement("br",null),"そんな時に役立ちます。",i.createElement("br",null),i.createElement("br",null),"どんな風に使えるか、ログインしてサンプルのアルバムを見てみましょう。"),i.createElement("p",null,i.createElement("button",{className:"google",onClick:e.GoogleLogin},"Googleでログイン")))),L=e=>{const t=d(C),a=d(O);return i.createElement("div",{id:"home"},i.createElement("nav",null,i.createElement(g,{to:"/"},i.createElement("img",{className:"logo",src:"/collectio.svg",alt:"Collectio"}))),i.createElement("div",{className:"profile"},i.createElement("img",{src:a.photoURL,alt:""}),i.createElement("p",null,a.displayName),i.createElement("button",{onClick:e.signOut},"ログアウト")),i.createElement("div",{className:"albums"},t.map((e=>i.createElement("div",{className:"album",key:e.id},i.createElement(g,{to:`/album/${e.id}`},i.createElement("div",{className:"image"},i.createElement("h4",null,e.title),i.createElement("span",null,e.date),i.createElement("div",{className:"photos"},e.photos.map((e=>i.createElement("div",{key:e.image,className:"photo",style:{backgroundImage:`url(${e.image})`}})))))),i.createElement("div",{className:"games"},e.games.map(((e,t)=>i.createElement(g,{to:{pathname:`/game/${e.id}`,state:{game:e}},key:e.id+e.title},i.createElement("div",{className:"game"},i.createElement("div",{style:{backgroundImage:`url(${e.image})`}}),i.createElement("span",{className:"title"},e.title)))))))))))},U=e=>{const t=d(C),[a,l]=p.exports.useState({album:null});let{id:s}=u();if(p.exports.useEffect((()=>{if(!a.album){const e=t.filter((e=>e.id===s))[0];e&&l({album:e})}})),!a.album)return null;const m=a.album;return i.createElement("div",{id:"album"},i.createElement("nav",null,i.createElement(g,{to:"/"},i.createElement("img",{className:"logo",src:"/back.svg",alt:"戻る"})),i.createElement("span",null),i.createElement("span",{onClick:()=>alert("アルバムのタイトル編集・アルバムの削除機能などがくる予定")},i.createElement("img",{src:"/menu.svg",alt:"menu"}))),i.createElement("div",{className:"album"},i.createElement("div",{className:"hero"},i.createElement("h4",null,m.title),i.createElement("span",null,m.date),i.createElement("div",{className:"cover",style:{backgroundImage:`url(${m.photos[0].image})`}})),i.createElement("div",{className:"actions"},i.createElement("h4",null,"遊んだゲーム"),"sample"===m.id?i.createElement("a",{onClick:()=>alert("サンプルのため、シェアできません。"),className:"share"},"シェア"):i.createElement(g,{to:{pathname:`/share/${m.id}`},className:"share"},"シェア")),i.createElement("div",{className:"games"},m.games.map(((e,t)=>i.createElement(g,{to:{pathname:`/game/${e.id}`,state:{game:e}},key:e.id},i.createElement("div",{key:"game"+t,className:"game"},i.createElement("div",{style:{backgroundImage:`url(${e.image})`}}),i.createElement("span",{className:"title"},e.title))))),"sample"===m.id?i.createElement("a",{onClick:()=>alert("サンプルのため、ゲームは追加できません。"),className:"add"},"+"):i.createElement(g,{to:"/select",className:"add"},"+"),0===m.games.length?i.createElement("p",null,"遊んだゲームを追加しましょう"):null),i.createElement("div",{className:"photos"},m.photos.map(((e,t)=>i.createElement(g,{to:{pathname:`/photo/${m.id}`,state:{album:m,index:t}},key:e.image},i.createElement("div",{className:"photo",style:{backgroundImage:`url(${e.image})`}})))))))};var T=b((e=>{const{game:t}=e.location.state;return i.createElement("div",{id:"game"},i.createElement("nav",null,i.createElement("a",{onClick:()=>e.history.goBack()},i.createElement("img",{className:"logo",src:"/back.svg",alt:"戻る"})),i.createElement("span",null),i.createElement("span",null)),i.createElement("div",{className:"game"},t.image?i.createElement("img",{src:t.image,alt:t.title}):i.createElement("div",{className:"noimage"},t.title),i.createElement("p",{className:"title"},t.title),"0"!==t.year?i.createElement("p",{className:"year"},t.year):null,i.createElement("div",{className:"links"},i.createElement("a",{href:"https://www.amazon.co.jp/s?k="+encodeURIComponent(t.title),className:"amazon",target:"_blank"},"Amazonで探す"),t.bodogema?i.createElement("a",{href:t.bodogema,className:"bodogema",target:"_blank"},"ボドゲーマ"):null,t.bgg?i.createElement("a",{href:t.bgg,className:"bgg",target:"_blank"},"BoardGameGeek"):null,t.bgdb?i.createElement("a",{href:t.bgdb,className:"bgdb",target:"_blank"},"ボードゲームデータベース"):null)))}));var _=b((e=>{const t=d(C),[a,l]=p.exports.useState({album:null});let{index:s}=e.location.state,{id:m}=u();p.exports.useEffect((()=>{if(!a.album){const e=t.filter((e=>e.id===m))[0];e&&l({album:e})}}));const n={dots:!1,infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1,initialSlide:s};return a.album?i.createElement("div",{id:"photo"},i.createElement(g,{to:{pathname:`/album/${m}`},className:"close"},i.createElement("img",{src:"/close.svg"})),i.createElement(E,o({},n),a.album.photos.map((e=>i.createElement(i.Fragment,{key:e.image},i.createElement("div",{style:{backgroundImage:`url(${e.image})`}})))))):null}));var G=b((e=>{const t=d(C),[a,l]=p.exports.useState({album:null,selectedImageIndex:[],selectDisabled:!1});let{id:s}=u();p.exports.useEffect((()=>{if(scrollTo(0,0),!a.album){const e=t.filter((e=>e.id===s))[0];e&&l(c(o({},a),{album:e}))}}));if(!a.album)return null;const m=a.album;return i.createElement("div",{id:"albumSelect"},i.createElement("nav",null,i.createElement(g,{to:{pathname:`/album/${m.id}`}},i.createElement("img",{className:"logo",src:"/back.svg",alt:"戻る"})),i.createElement("span",null,"写真の選択"),i.createElement("span",null)),i.createElement("div",{className:"album"},i.createElement("div",{className:"photos"},m.photos.map(((e,t)=>i.createElement("div",{key:e.image,className:"photo"+(a.selectDisabled?" disabled":""),onClick:()=>(e=>{-1===a.selectedImageIndex.indexOf(e)?!1===a.selectDisabled&&a.selectedImageIndex.push(e):(a.selectedImageIndex.splice(a.selectedImageIndex.indexOf(e),1),l(c(o({},a),{selectDisabled:!1}))),a.selectedImageIndex.length>=4&&l(c(o({},a),{selectDisabled:!0})),l(a)})(t),style:{backgroundImage:`url(${e.image})`}},i.createElement("span",{className:"select"+(a.selectedImageIndex.indexOf(t)>-1?" selected":"")}))))),i.createElement("div",{className:"bottomActions"},i.createElement("span",{className:"share",onClick:()=>{if(0===a.selectedImageIndex.length)return alert("写真を選択してください");const t=a.album.photos.filter(((e,t)=>a.selectedImageIndex.indexOf(t)>-1));e.history.push({pathname:"/share",state:{photos:t,album:a.album}})}},"次へ"))))}));h.initializeApp(x);const z=h.firestore();h.storage(),h.analytics();const B={id:"sample",title:"サンプルのボードゲーム会",date:`${(new Date).getFullYear()}/${(new Date).getMonth()+1}/${(new Date).getDate()}`,photos:[{image:"https://storage.googleapis.com/collectio-photo-assets/sample/1.jpg"},{image:"https://storage.googleapis.com/collectio-photo-assets/sample/2.jpg"},{image:"https://storage.googleapis.com/collectio-photo-assets/sample/3.jpg"},{image:"https://storage.googleapis.com/collectio-photo-assets/sample/4.jpg"},{image:"https://storage.googleapis.com/collectio-photo-assets/sample/5.jpg"},{image:"https://storage.googleapis.com/collectio-photo-assets/sample/6.jpg"}],games:[{bgdb:"http://www.gamers-jp.com/playgame/db_gamea.php?game_id=6959",bgg:"https://boardgamegeek.com/boardgame/191895",bodogema:"https://bodoge.hoobby.net/games/golovonogi",etitle:"Toddles-Bobbles Green",hasJPURL:1,id:"95735",keyword:"なんじゃもんじゃ,みどり,緑",maxPlayers:6,minPlayers:2,playAge:4,playingTime:15,title:"ナンジャモンジャ・ミドリ",year:"2010",image:"https://db.collectio.jp/wp-content/uploads/2019/05/95735.jpg"},{bgdb:"",bgg:"https://boardgamegeek.com/boardgame/230802",bodogema:"https://bodoge.hoobby.net/games/azul",etitle:"Azul",hasJPURL:1,id:"72660",keyword:"",maxPlayers:4,minPlayers:2,playAge:8,playingTime:45,title:"アズール",year:"2017",image:"https://db.collectio.jp/wp-content/uploads/2019/05/72660.jpg"},{bgdb:"http://www.gamers-jp.com/playgame/db_gamea.php?game_id=4786",bgg:"https://boardgamegeek.com/boardgame/68448",bodogema:"https://bodoge.hoobby.net/games/7-wonders",etitle:"7 Wonders",hasJPURL:1,id:"81063",keyword:"せかいのななふしぎ せぶんわんだー 7わんだー",maxPlayers:"",minPlayers:"",playAge:"",playingTime:"",title:"世界の七不思議",year:"2010",image:"https://db.collectio.jp/wp-content/uploads/2019/05/81063.jpg"},{bgdb:null,bgg:null,bodogema:null,etitle:"",hasJPURL:1,id:"110318",keyword:"",maxPlayers:null,minPlayers:null,playAge:null,playingTime:null,title:"Escape from the Office: The exciting escape game – escape your boss",year:"0",image:null}],userId:""};function J(){const e=d(O),t=y();p.exports.useEffect((()=>{if(!e)return h.auth().onAuthStateChanged((e=>{e&&(t(P({uid:e.uid,photoURL:e.photoURL,displayName:e.displayName})),((e,t)=>{z.collection("albums").where("userId","==",e.uid).orderBy("date").get().then((e=>{e.forEach((e=>{const a=e.data();a.id=e.id,t(S(a))})),e.empty&&t(S(B))})).catch((e=>{console.log("Error getting documents: ",e)}))})(e,t))})),()=>{console.log("Clean up")}}));const a=()=>{const e=new h.auth.GoogleAuthProvider;h.auth().signInWithRedirect(e)},l=()=>{h.auth().signOut().then((()=>{location.reload()})).catch((e=>{}))};return i.createElement(v,null,i.createElement("div",null,i.createElement(N,null,i.createElement(f,{path:"/share/:id"},i.createElement(G,null)),i.createElement(f,{path:"/photo/:id"},i.createElement(_,null)),i.createElement(f,{path:"/game/:id"},i.createElement(T,null)),i.createElement(f,{path:"/album/:id"},i.createElement(U,null)),i.createElement(f,{path:"/",render:()=>e?i.createElement(L,{signOut:l}):i.createElement(D,{GoogleLogin:a})}))))}const W=k({reducer:{userReducer:$,albumsReducer:A}});I.render(i.createElement(i.StrictMode,null,i.createElement(w,{store:W},i.createElement(J,null))),document.getElementById("root"));
