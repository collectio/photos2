var e=Object.defineProperty,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,s=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l;import{c as m,R as o,L as n,u as c,r,a as i,w as g,S as d,f as p,b as u,B as b,d as E,e as h,g as y,h as v,P as N}from"./vendor.3d84330c.js";var k={apiKey:"AIzaSyDnb7CnJxySsm2_w1Yq1l3ZlsRsN2qe16c",authDomain:"collectio-photo-2233e.firebaseapp.com",projectId:"collectio-photo-2233e",storageBucket:"collectio-photo-2233e.appspot.com",messagingSenderId:"590643802391",appId:"1:590643802391:web:ad661fba7fb099ca018752",measurementId:"G-X7DEP88WR5"};const f=m({name:"user",initialState:{user:null},reducers:{setUser:(e,t)=>{e.user=t.payload}}}),{setUser:w}=f.actions,j=e=>e.userReducer.user;var P=f.reducer;const I=m({name:"albums",initialState:{albums:[]},reducers:{addAlbums:(e,t)=>{e.albums.push(t.payload)}}}),{addAlbums:S}=I.actions,C=e=>e.albumsReducer.albums;var $=I.reducer;const x=e=>o.createElement("div",{id:"home"},o.createElement("nav",null,o.createElement(n,{to:"/"},o.createElement("img",{className:"logo",src:"/collectio.svg",alt:"Collectio"}))),o.createElement("div",{className:"login"},o.createElement("h2",null,"Collectio Photoへようこそ"),o.createElement("p",null,"このアプリは、ボードゲームを遊んだ時の写真をアルバムにまとめて、遊んだゲームを記録できるアプリです。",o.createElement("br",null),o.createElement("br",null),"「この前、あの時、遊んだゲームはなんだった？」",o.createElement("br",null),"そんな時に役立ちます。",o.createElement("br",null),o.createElement("br",null),"どんな風に使えるか、ログインしてサンプルのアルバムを見てみましょう。"),o.createElement("p",null,o.createElement("button",{className:"google",onClick:e.GoogleLogin},"Googleでログイン")))),R=e=>{const t=c(C);return o.createElement("div",{id:"home"},o.createElement("nav",null,o.createElement(n,{to:"/"},o.createElement("img",{className:"logo",src:"/collectio.svg",alt:"Collectio"}))),o.createElement("div",{className:"albums"},t.map((e=>o.createElement("div",{className:"album",key:e.id},o.createElement(n,{to:`/album/${e.id}`},o.createElement("div",{className:"image"},o.createElement("h4",null,e.title),o.createElement("span",null,e.date),o.createElement("div",{className:"photos"},e.photos.map((e=>o.createElement("div",{key:e.image,className:"photo",style:{backgroundImage:`url(${e.image})`}})))))),o.createElement("div",{className:"games"},e.games.map(((e,t)=>o.createElement(n,{to:{pathname:`/game/${e.id}`,state:{game:e}},key:e.id+e.title},o.createElement("div",{className:"game"},o.createElement("div",{style:{backgroundImage:`url(${e.image})`}}),o.createElement("span",{className:"title"},e.title)))))))))))},A=e=>{const t=c(C),[a,l]=r.exports.useState({album:null});let{id:s}=i();if(r.exports.useEffect((()=>{if(!a.album){const e=t.filter((e=>e.id===s))[0];e&&l({album:e})}})),!a.album)return null;const m=a.album;return o.createElement("div",{id:"album"},o.createElement("nav",null,o.createElement(n,{to:"/"},o.createElement("img",{className:"logo",src:"/back.svg",alt:"戻る"})),o.createElement("span",null),o.createElement("span",{onClick:()=>alert("アルバムのタイトル編集・アルバムの削除機能などがくる予定")},o.createElement("img",{src:"/menu.svg",alt:"menu"}))),o.createElement("div",{className:"album"},o.createElement("div",{className:"hero"},o.createElement("h4",null,m.title),o.createElement("span",null,m.date),o.createElement("div",{className:"cover",style:{backgroundImage:`url(${m.photos[0].image})`}})),o.createElement("div",{className:"actions"},o.createElement("h4",null,"遊んだゲーム"),"sample"===m.id?o.createElement("a",{onClick:()=>alert("サンプルのため、シェアできません。"),className:"share"},"シェア"):o.createElement(n,{to:{pathname:"/shareSelect",state:{album:m}},className:"share"},"シェア")),o.createElement("div",{className:"games"},m.games.map(((e,t)=>o.createElement(n,{to:{pathname:`/game/${e.id}`,state:{game:e}},key:e.id},o.createElement("div",{key:"game"+t,className:"game"},o.createElement("div",{style:{backgroundImage:`url(${e.image})`}}),o.createElement("span",{className:"title"},e.title))))),"sample"===m.id?o.createElement("a",{onClick:()=>alert("サンプルのため、ゲームは追加できません。"),className:"add"},"+"):o.createElement(n,{to:"/select",className:"add"},"+"),0===m.games.length?o.createElement("p",null,"遊んだゲームを追加しましょう"):null),o.createElement("div",{className:"photos"},m.photos.map(((e,t)=>o.createElement(n,{to:{pathname:`/photo/${m.id}`,state:{album:m,index:t}},key:e.image},o.createElement("div",{className:"photo",style:{backgroundImage:`url(${e.image})`}})))))))};var G=g((e=>{const{game:t}=e.location.state;return o.createElement("div",{id:"game"},o.createElement("nav",null,o.createElement("a",{onClick:()=>e.history.goBack()},o.createElement("img",{className:"logo",src:"/back.svg",alt:"戻る"})),o.createElement("span",null),o.createElement("span",null)),o.createElement("div",{className:"game"},t.image?o.createElement("img",{src:t.image,alt:t.title}):o.createElement("div",{className:"noimage"},t.title),o.createElement("p",{className:"title"},t.title),"0"!==t.year?o.createElement("p",{className:"year"},t.year):null,o.createElement("div",{className:"links"},o.createElement("a",{href:"https://www.amazon.co.jp/s?k="+encodeURIComponent(t.title),className:"amazon",target:"_blank"},"Amazonで探す"),t.bodogema?o.createElement("a",{href:t.bodogema,className:"bodogema",target:"_blank"},"ボドゲーマ"):null,t.bgg?o.createElement("a",{href:t.bgg,className:"bgg",target:"_blank"},"BoardGameGeek"):null,t.bgdb?o.createElement("a",{href:t.bgdb,className:"bgdb",target:"_blank"},"ボードゲームデータベース"):null)))}));var _=g((e=>{const m=c(C),[g,p]=r.exports.useState({album:null});let{index:u}=e.location.state,{id:b}=i();r.exports.useEffect((()=>{if(!g.album){const e=m.filter((e=>e.id===b))[0];e&&p({album:e})}}));const E={dots:!1,infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1,initialSlide:u};return g.album?o.createElement("div",{id:"photo"},o.createElement(n,{to:{pathname:`/album/${b}`},className:"close"},o.createElement("img",{src:"/close.svg"})),o.createElement(d,((e,m)=>{for(var o in m||(m={}))a.call(m,o)&&s(e,o,m[o]);if(t)for(var o of t(m))l.call(m,o)&&s(e,o,m[o]);return e})({},E),g.album.photos.map((e=>o.createElement(o.Fragment,{key:e.image},o.createElement("div",{style:{backgroundImage:`url(${e.image})`}})))))):null}));p.initializeApp(k);const O=p.firestore();p.storage(),p.analytics();const T={id:"sample",title:"サンプルのボードゲーム会",date:`${(new Date).getFullYear()}/${(new Date).getMonth()+1}/${(new Date).getDate()}`,photos:[{image:"https://storage.googleapis.com/collectio-photo-assets/sample/1.jpg"},{image:"https://storage.googleapis.com/collectio-photo-assets/sample/2.jpg"},{image:"https://storage.googleapis.com/collectio-photo-assets/sample/3.jpg"},{image:"https://storage.googleapis.com/collectio-photo-assets/sample/4.jpg"},{image:"https://storage.googleapis.com/collectio-photo-assets/sample/5.jpg"},{image:"https://storage.googleapis.com/collectio-photo-assets/sample/6.jpg"}],games:[{bgdb:"http://www.gamers-jp.com/playgame/db_gamea.php?game_id=6959",bgg:"https://boardgamegeek.com/boardgame/191895",bodogema:"https://bodoge.hoobby.net/games/golovonogi",etitle:"Toddles-Bobbles Green",hasJPURL:1,id:"95735",keyword:"なんじゃもんじゃ,みどり,緑",maxPlayers:6,minPlayers:2,playAge:4,playingTime:15,title:"ナンジャモンジャ・ミドリ",year:"2010",image:"https://db.collectio.jp/wp-content/uploads/2019/05/95735.jpg"},{bgdb:"",bgg:"https://boardgamegeek.com/boardgame/230802",bodogema:"https://bodoge.hoobby.net/games/azul",etitle:"Azul",hasJPURL:1,id:"72660",keyword:"",maxPlayers:4,minPlayers:2,playAge:8,playingTime:45,title:"アズール",year:"2017",image:"https://db.collectio.jp/wp-content/uploads/2019/05/72660.jpg"},{bgdb:"http://www.gamers-jp.com/playgame/db_gamea.php?game_id=4786",bgg:"https://boardgamegeek.com/boardgame/68448",bodogema:"https://bodoge.hoobby.net/games/7-wonders",etitle:"7 Wonders",hasJPURL:1,id:"81063",keyword:"せかいのななふしぎ せぶんわんだー 7わんだー",maxPlayers:"",minPlayers:"",playAge:"",playingTime:"",title:"世界の七不思議",year:"2010",image:"https://db.collectio.jp/wp-content/uploads/2019/05/81063.jpg"},{bgdb:null,bgg:null,bodogema:null,etitle:"",hasJPURL:1,id:"110318",keyword:"",maxPlayers:null,minPlayers:null,playAge:null,playingTime:null,title:"Escape from the Office: The exciting escape game – escape your boss",year:"0",image:null}],userId:""};function z(){const e=c(j),t=u();r.exports.useEffect((()=>{if(!e)return p.auth().onAuthStateChanged((e=>{e&&(t(w({uid:e.uid})),((e,t)=>{O.collection("albums").where("userId","==",e.uid).orderBy("date").get().then((e=>{e.forEach((e=>{const a=e.data();a.id=e.id,t(S(a))})),e.empty&&t(S(T))})).catch((e=>{console.log("Error getting documents: ",e)}))})(e,t))})),()=>{console.log("Clean up")}}));const a=()=>{const e=new p.auth.GoogleAuthProvider;p.auth().signInWithRedirect(e)},l=x;return o.createElement(b,null,o.createElement("div",null,e?o.createElement("button",{onClick:()=>{p.auth().signOut().then((()=>{location.reload()})).catch((e=>{}))}},"ログアウト"):o.createElement("button",{className:"google",onClick:a},"Googleでログイン"),o.createElement(E,null,o.createElement(h,{path:"/photo/:id"},o.createElement(_,null)),o.createElement(h,{path:"/game/:id"},o.createElement(G,null)),o.createElement(h,{path:"/album/:id"},o.createElement(A,null)),o.createElement(h,{path:"/",render:()=>e?o.createElement(R,null):o.createElement(l,{GoogleLogin:a})}))))}const B=y({reducer:{userReducer:P,albumsReducer:$}});v.render(o.createElement(o.StrictMode,null,o.createElement(N,{store:B},o.createElement(z,null))),document.getElementById("root"));
