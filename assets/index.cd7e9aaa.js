var e=Object.defineProperty,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,s=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l;import{c as m,R as n,L as o,u as c,r,a as i,w as g,S as d,f as p,b as u,B as E,d as b,e as h,g as y,h as v,P as N}from"./vendor.3d84330c.js";var f={apiKey:"AIzaSyDnb7CnJxySsm2_w1Yq1l3ZlsRsN2qe16c",authDomain:"collectio-photo-2233e.firebaseapp.com",projectId:"collectio-photo-2233e",storageBucket:"collectio-photo-2233e.appspot.com",messagingSenderId:"590643802391",appId:"1:590643802391:web:ad661fba7fb099ca018752",measurementId:"G-X7DEP88WR5"};const k=m({name:"user",initialState:{user:null},reducers:{setUser:(e,t)=>{e.user=t.payload}}}),{setUser:w}=k.actions,j=e=>e.userReducer.user;var x=k.reducer;const P=m({name:"albums",initialState:{albums:[]},reducers:{addAlbums:(e,t)=>{e.albums.push(t.payload)}}}),{addAlbums:I}=P.actions,S=e=>e.albumsReducer.albums;var $=P.reducer;const R=e=>n.createElement("div",{id:"home"},n.createElement("nav",null,n.createElement(o,{to:"/"},n.createElement("img",{className:"logo",src:"/collectio.svg",alt:"Collectio"}))),n.createElement("div",{className:"login"},n.createElement("h2",null,"Collectio Photoへようこそ"),n.createElement("p",null,"このアプリは、ボードゲームを遊んだ時の写真をアルバムにまとめて、遊んだゲームを記録できるアプリです。",n.createElement("br",null),n.createElement("br",null),"「この前、あの時、遊んだゲームはなんだった？」",n.createElement("br",null),"そんな時に役立ちます。",n.createElement("br",null),n.createElement("br",null),"どんな風に使えるか、ログインしてサンプルのアルバムを見てみましょう。"),n.createElement("p",null,n.createElement("button",{className:"google",onClick:e.GoogleLogin},"Googleでログイン")))),C=e=>{const t=c(S),a=c(j);return n.createElement("div",{id:"home"},n.createElement("nav",null,n.createElement(o,{to:"/"},n.createElement("img",{className:"logo",src:"/collectio.svg",alt:"Collectio"}))),n.createElement("div",{className:"profile"},n.createElement("img",{src:a.photoURL,alt:""}),n.createElement("p",null,a.displayName),n.createElement("button",{onClick:e.signOut},"ログアウト")),n.createElement("div",{className:"albums"},t.map((e=>n.createElement("div",{className:"album",key:e.id},n.createElement(o,{to:`/album/${e.id}`},n.createElement("div",{className:"image"},n.createElement("h4",null,e.title),n.createElement("span",null,e.date),n.createElement("div",{className:"photos"},e.photos.map((e=>n.createElement("div",{key:e.image,className:"photo",style:{backgroundImage:`url(${e.image})`}})))))),n.createElement("div",{className:"games"},e.games.map(((e,t)=>n.createElement(o,{to:{pathname:`/game/${e.id}`,state:{game:e}},key:e.id+e.title},n.createElement("div",{className:"game"},n.createElement("div",{style:{backgroundImage:`url(${e.image})`}}),n.createElement("span",{className:"title"},e.title)))))))))))},O=e=>{const t=c(S),[a,l]=r.exports.useState({album:null});let{id:s}=i();if(r.exports.useEffect((()=>{if(!a.album){const e=t.filter((e=>e.id===s))[0];e&&l({album:e})}})),!a.album)return null;const m=a.album;return n.createElement("div",{id:"album"},n.createElement("nav",null,n.createElement(o,{to:"/"},n.createElement("img",{className:"logo",src:"/back.svg",alt:"戻る"})),n.createElement("span",null),n.createElement("span",{onClick:()=>alert("アルバムのタイトル編集・アルバムの削除機能などがくる予定")},n.createElement("img",{src:"/menu.svg",alt:"menu"}))),n.createElement("div",{className:"album"},n.createElement("div",{className:"hero"},n.createElement("h4",null,m.title),n.createElement("span",null,m.date),n.createElement("div",{className:"cover",style:{backgroundImage:`url(${m.photos[0].image})`}})),n.createElement("div",{className:"actions"},n.createElement("h4",null,"遊んだゲーム"),"sample"===m.id?n.createElement("a",{onClick:()=>alert("サンプルのため、シェアできません。"),className:"share"},"シェア"):n.createElement(o,{to:{pathname:`/share/${m.id}`},className:"share"},"シェア")),n.createElement("div",{className:"games"},m.games.map(((e,t)=>n.createElement(o,{to:{pathname:`/game/${e.id}`,state:{game:e}},key:e.id},n.createElement("div",{key:"game"+t,className:"game"},n.createElement("div",{style:{backgroundImage:`url(${e.image})`}}),n.createElement("span",{className:"title"},e.title))))),"sample"===m.id?n.createElement("a",{onClick:()=>alert("サンプルのため、ゲームは追加できません。"),className:"add"},"+"):n.createElement(o,{to:"/select",className:"add"},"+"),0===m.games.length?n.createElement("p",null,"遊んだゲームを追加しましょう"):null),n.createElement("div",{className:"photos"},m.photos.map(((e,t)=>n.createElement(o,{to:{pathname:`/photo/${m.id}`,state:{album:m,index:t}},key:e.image},n.createElement("div",{className:"photo",style:{backgroundImage:`url(${e.image})`}})))))))};var A=g((e=>{const{game:t}=e.location.state;return n.createElement("div",{id:"game"},n.createElement("nav",null,n.createElement("a",{onClick:()=>e.history.goBack()},n.createElement("img",{className:"logo",src:"/back.svg",alt:"戻る"})),n.createElement("span",null),n.createElement("span",null)),n.createElement("div",{className:"game"},t.image?n.createElement("img",{src:t.image,alt:t.title}):n.createElement("div",{className:"noimage"},t.title),n.createElement("p",{className:"title"},t.title),"0"!==t.year?n.createElement("p",{className:"year"},t.year):null,n.createElement("div",{className:"links"},n.createElement("a",{href:"https://www.amazon.co.jp/s?k="+encodeURIComponent(t.title),className:"amazon",target:"_blank"},"Amazonで探す"),t.bodogema?n.createElement("a",{href:t.bodogema,className:"bodogema",target:"_blank"},"ボドゲーマ"):null,t.bgg?n.createElement("a",{href:t.bgg,className:"bgg",target:"_blank"},"BoardGameGeek"):null,t.bgdb?n.createElement("a",{href:t.bgdb,className:"bgdb",target:"_blank"},"ボードゲームデータベース"):null)))}));var L=g((e=>{const m=c(S),[g,p]=r.exports.useState({album:null});let{index:u}=e.location.state,{id:E}=i();r.exports.useEffect((()=>{if(!g.album){const e=m.filter((e=>e.id===E))[0];e&&p({album:e})}}));const b={dots:!1,infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1,initialSlide:u};return g.album?n.createElement("div",{id:"photo"},n.createElement(o,{to:{pathname:`/album/${E}`},className:"close"},n.createElement("img",{src:"/close.svg"})),n.createElement(d,((e,m)=>{for(var n in m||(m={}))a.call(m,n)&&s(e,n,m[n]);if(t)for(var n of t(m))l.call(m,n)&&s(e,n,m[n]);return e})({},b),g.album.photos.map((e=>n.createElement(n.Fragment,{key:e.image},n.createElement("div",{style:{backgroundImage:`url(${e.image})`}})))))):null}));var U=g((e=>{const t=c(S),[a,l]=r.exports.useState(null),[s,m]=r.exports.useState([]),[g,d]=r.exports.useState(!1);let{id:p}=i();r.exports.useEffect((()=>{if(scrollTo(0,0),!a){const e=t.filter((e=>e.id===p))[0];e&&l(e)}}));return a?n.createElement("div",{id:"shareSelect"},n.createElement("nav",null,n.createElement(o,{to:{pathname:`/album/${a.id}`}},n.createElement("img",{className:"logo",src:"/back.svg",alt:"戻る"})),n.createElement("span",null,"写真の選択"),n.createElement("span",null)),n.createElement("div",{className:"album"},n.createElement("div",{className:"photos"},a.photos.map(((e,t)=>n.createElement("div",{key:e.image,className:"photo"+(g?" disabled":""),onClick:()=>(e=>{console.log(e),-1===s.indexOf(e)?!1===g&&(s.push(e),m(s)):(s.splice(s.indexOf(e),1),d(!1)),s.length>=4&&d(!0)})(t),style:{backgroundImage:`url(${e.image})`}},n.createElement("span",{className:"select"+(s.indexOf(t)>-1?" selected":"")}))))),n.createElement("div",{className:"bottomActions"},n.createElement("span",{className:"share",onClick:()=>{if(0===s.length)return alert("写真を選択してください");const t=a.photos.filter(((e,t)=>s.indexOf(t)>-1));e.history.push({pathname:"/share",state:{photos:t,album:a}})}},"次へ")))):null}));p.initializeApp(f);const T=p.firestore();p.storage(),p.analytics();const _={id:"sample",title:"サンプルのボードゲーム会",date:`${(new Date).getFullYear()}/${(new Date).getMonth()+1}/${(new Date).getDate()}`,photos:[{image:"https://storage.googleapis.com/collectio-photo-assets/sample/1.jpg"},{image:"https://storage.googleapis.com/collectio-photo-assets/sample/2.jpg"},{image:"https://storage.googleapis.com/collectio-photo-assets/sample/3.jpg"},{image:"https://storage.googleapis.com/collectio-photo-assets/sample/4.jpg"},{image:"https://storage.googleapis.com/collectio-photo-assets/sample/5.jpg"},{image:"https://storage.googleapis.com/collectio-photo-assets/sample/6.jpg"}],games:[{bgdb:"http://www.gamers-jp.com/playgame/db_gamea.php?game_id=6959",bgg:"https://boardgamegeek.com/boardgame/191895",bodogema:"https://bodoge.hoobby.net/games/golovonogi",etitle:"Toddles-Bobbles Green",hasJPURL:1,id:"95735",keyword:"なんじゃもんじゃ,みどり,緑",maxPlayers:6,minPlayers:2,playAge:4,playingTime:15,title:"ナンジャモンジャ・ミドリ",year:"2010",image:"https://db.collectio.jp/wp-content/uploads/2019/05/95735.jpg"},{bgdb:"",bgg:"https://boardgamegeek.com/boardgame/230802",bodogema:"https://bodoge.hoobby.net/games/azul",etitle:"Azul",hasJPURL:1,id:"72660",keyword:"",maxPlayers:4,minPlayers:2,playAge:8,playingTime:45,title:"アズール",year:"2017",image:"https://db.collectio.jp/wp-content/uploads/2019/05/72660.jpg"},{bgdb:"http://www.gamers-jp.com/playgame/db_gamea.php?game_id=4786",bgg:"https://boardgamegeek.com/boardgame/68448",bodogema:"https://bodoge.hoobby.net/games/7-wonders",etitle:"7 Wonders",hasJPURL:1,id:"81063",keyword:"せかいのななふしぎ せぶんわんだー 7わんだー",maxPlayers:"",minPlayers:"",playAge:"",playingTime:"",title:"世界の七不思議",year:"2010",image:"https://db.collectio.jp/wp-content/uploads/2019/05/81063.jpg"},{bgdb:null,bgg:null,bodogema:null,etitle:"",hasJPURL:1,id:"110318",keyword:"",maxPlayers:null,minPlayers:null,playAge:null,playingTime:null,title:"Escape from the Office: The exciting escape game – escape your boss",year:"0",image:null}],userId:""};function G(){const e=c(j),t=u();r.exports.useEffect((()=>{if(!e)return p.auth().onAuthStateChanged((e=>{e&&(t(w({uid:e.uid,photoURL:e.photoURL,displayName:e.displayName})),((e,t)=>{T.collection("albums").where("userId","==",e.uid).orderBy("date").get().then((e=>{e.forEach((e=>{const a=e.data();a.id=e.id,t(I(a))})),e.empty&&t(I(_))})).catch((e=>{console.log("Error getting documents: ",e)}))})(e,t))})),()=>{console.log("Clean up")}}));const a=()=>{const e=new p.auth.GoogleAuthProvider;p.auth().signInWithRedirect(e)},l=()=>{p.auth().signOut().then((()=>{location.reload()})).catch((e=>{}))};return n.createElement(E,null,n.createElement("div",null,n.createElement(b,null,n.createElement(h,{path:"/share/:id"},n.createElement(U,null)),n.createElement(h,{path:"/photo/:id"},n.createElement(L,null)),n.createElement(h,{path:"/game/:id"},n.createElement(A,null)),n.createElement(h,{path:"/album/:id"},n.createElement(O,null)),n.createElement(h,{path:"/",render:()=>e?n.createElement(C,{signOut:l}):n.createElement(R,{GoogleLogin:a})}))))}const z=y({reducer:{userReducer:x,albumsReducer:$}});v.render(n.createElement(n.StrictMode,null,n.createElement(N,{store:z},n.createElement(G,null))),document.getElementById("root"));
