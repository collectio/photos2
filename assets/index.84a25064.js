import{c as e,u as t,R as a,L as l,r as n,a as o,w as s,b as m,f as r,B as c,S as i,d as g,e as d,g as u,P as p}from"./vendor.e6c96f64.js";var b={apiKey:"AIzaSyDnb7CnJxySsm2_w1Yq1l3ZlsRsN2qe16c",authDomain:"collectio-photo-2233e.firebaseapp.com",projectId:"collectio-photo-2233e",storageBucket:"collectio-photo-2233e.appspot.com",messagingSenderId:"590643802391",appId:"1:590643802391:web:ad661fba7fb099ca018752",measurementId:"G-X7DEP88WR5"};const h=e({name:"user",initialState:{user:null},reducers:{setUser:(e,t)=>{e.user=t.payload}}}),{setUser:E}=h.actions,y=e=>e.userReducer.user;var v=h.reducer;const k=e({name:"albums",initialState:{albums:[]},reducers:{addAlbums:(e,t)=>{e.albums.push(t.payload)}}}),{addAlbums:N}=k.actions,f=e=>e.albumsReducer.albums;var w=k.reducer;function j(){const e=t(f);return a.createElement("div",{id:"home"},a.createElement("div",{className:"albums"},e.map((e=>a.createElement("div",{className:"album",key:e.id},a.createElement(l,{to:`/album/${e.id}`},a.createElement("div",{className:"image"},a.createElement("h4",null,e.title),a.createElement("span",null,e.date),a.createElement("div",{className:"photos"},e.photos.map((e=>a.createElement("div",{key:e.image,className:"photo",style:{backgroundImage:`url(${e.image})`}})))))),a.createElement("div",{className:"games"},e.games.map(((e,t)=>a.createElement(l,{to:{pathname:`/game/${e.id}`,state:{game:e}},key:e.id+e.title},a.createElement("div",{className:"game"},a.createElement("div",{style:{backgroundImage:`url(${e.image})`}}),a.createElement("span",{className:"title"},e.title)))))))))))}function I(){const e=t(f),[s,m]=n.exports.useState({album:null});let{id:r}=o();if(n.exports.useEffect((()=>{if(!s.album){const t=e.filter((e=>e.id===r))[0];t&&m({album:t})}})),!s.album)return null;const c=s.album;return a.createElement("div",{id:"album"},a.createElement("div",{className:"album"},a.createElement("div",{className:"hero"},a.createElement("h4",null,c.title),a.createElement("span",null,c.date),a.createElement("div",{className:"cover",style:{backgroundImage:`url(${c.photos[0].image})`}})),a.createElement("div",{className:"actions"},a.createElement("h4",null,"遊んだゲーム"),"sample"===c.id?a.createElement("a",{onClick:()=>alert("サンプルのため、シェアできません。"),className:"share"},"シェア"):a.createElement(l,{to:{pathname:"/shareSelect",state:{album:c}},className:"share"},"シェア")),a.createElement("div",{className:"games"},c.games.map(((e,t)=>a.createElement(l,{to:{pathname:`/game/${e.id}`,state:{game:e}},key:e.id},a.createElement("div",{key:"game"+t,className:"game"},a.createElement("div",{style:{backgroundImage:`url(${e.image})`}}),a.createElement("span",{className:"title"},e.title))))),"sample"===c.id?a.createElement("a",{onClick:()=>alert("サンプルのため、ゲームは追加できません。"),className:"add"},"+"):a.createElement(l,{to:"/select",className:"add"},"+"),0===c.games.length?a.createElement("p",null,"遊んだゲームを追加しましょう"):null),a.createElement("div",{className:"photos"},c.photos.map(((e,t)=>a.createElement(l,{to:{pathname:"/photo",state:{album:c,photo:e,index:t}},key:e.image},a.createElement("div",{className:"photo",style:{backgroundImage:`url(${e.image})`}})))))))}var P=s((function(e){const{game:t}=e.location.state;return a.createElement("div",{id:"game"},a.createElement("nav",null,a.createElement("a",{onClick:()=>e.history.goBack()},a.createElement("img",{className:"logo",src:"./assets/back.svg",alt:"戻る"})),a.createElement("span",null),a.createElement("span",null)),a.createElement("div",{className:"game"},t.image?a.createElement("img",{src:t.image,alt:t.title}):a.createElement("div",{className:"noimage"},t.title),a.createElement("p",{className:"title"},t.title),"0"!==t.year?a.createElement("p",{className:"year"},t.year):null,a.createElement("div",{className:"links"},a.createElement("a",{href:"https://www.amazon.co.jp/s?k="+encodeURIComponent(t.title),className:"amazon",target:"_blank"},"Amazonで探す"),t.bodogema?a.createElement("a",{href:t.bodogema,className:"bodogema",target:"_blank"},"ボドゲーマ"):null,t.bgg?a.createElement("a",{href:t.bgg,className:"bgg",target:"_blank"},"BoardGameGeek"):null,t.bgdb?a.createElement("a",{href:t.bgdb,className:"bgdb",target:"_blank"},"ボードゲームデータベース"):null)))}));const R=e({name:"generation",initialState:{generation:"First"},reducers:{changeGeneration:(e,t)=>{e.generation=t.payload}}}),{changeGeneration:A}=R.actions,S=e=>e.generationReducer.generation;var C=R.reducer;const G=()=>{const e=t(S),l=m();return a.createElement("div",null,a.createElement("button",{type:"button",onClick:()=>l(A("First"))},"First Generation"),a.createElement("button",{type:"button",onClick:()=>l(A("Second"))},"Second Generation"),a.createElement("button",{type:"button",onClick:()=>l(A("Third"))},"Third Generation"),a.createElement("div",null,"Generation is ",e))};r.initializeApp(b);const $=r.firestore();r.storage(),r.analytics();const x={id:"sample",title:"サンプルのボードゲーム会",date:`${(new Date).getFullYear()}/${(new Date).getMonth()+1}/${(new Date).getDate()}`,photos:[{image:"https://storage.googleapis.com/collectio-photo-assets/sample/1.jpg"},{image:"https://storage.googleapis.com/collectio-photo-assets/sample/2.jpg"},{image:"https://storage.googleapis.com/collectio-photo-assets/sample/3.jpg"},{image:"https://storage.googleapis.com/collectio-photo-assets/sample/4.jpg"},{image:"https://storage.googleapis.com/collectio-photo-assets/sample/5.jpg"},{image:"https://storage.googleapis.com/collectio-photo-assets/sample/6.jpg"}],games:[{bgdb:"http://www.gamers-jp.com/playgame/db_gamea.php?game_id=6959",bgg:"https://boardgamegeek.com/boardgame/191895",bodogema:"https://bodoge.hoobby.net/games/golovonogi",etitle:"Toddles-Bobbles Green",hasJPURL:1,id:"95735",keyword:"なんじゃもんじゃ,みどり,緑",maxPlayers:6,minPlayers:2,playAge:4,playingTime:15,title:"ナンジャモンジャ・ミドリ",year:"2010",image:"https://db.collectio.jp/wp-content/uploads/2019/05/95735.jpg"},{bgdb:"",bgg:"https://boardgamegeek.com/boardgame/230802",bodogema:"https://bodoge.hoobby.net/games/azul",etitle:"Azul",hasJPURL:1,id:"72660",keyword:"",maxPlayers:4,minPlayers:2,playAge:8,playingTime:45,title:"アズール",year:"2017",image:"https://db.collectio.jp/wp-content/uploads/2019/05/72660.jpg"},{bgdb:"http://www.gamers-jp.com/playgame/db_gamea.php?game_id=4786",bgg:"https://boardgamegeek.com/boardgame/68448",bodogema:"https://bodoge.hoobby.net/games/7-wonders",etitle:"7 Wonders",hasJPURL:1,id:"81063",keyword:"せかいのななふしぎ せぶんわんだー 7わんだー",maxPlayers:"",minPlayers:"",playAge:"",playingTime:"",title:"世界の七不思議",year:"2010",image:"https://db.collectio.jp/wp-content/uploads/2019/05/81063.jpg"},{bgdb:null,bgg:null,bodogema:null,etitle:"",hasJPURL:1,id:"110318",keyword:"",maxPlayers:null,minPlayers:null,playAge:null,playingTime:null,title:"Escape from the Office: The exciting escape game – escape your boss",year:"0",image:null}],userId:""};function _(){const e=t(y),o=m();n.exports.useEffect((()=>{if(!e)return r.auth().onAuthStateChanged((e=>{console.log(e),e&&(console.log(e),o(E({uid:e.uid})),((e,t)=>{$.collection("albums").where("userId","==",e.uid).orderBy("date").get().then((e=>{e.forEach((e=>{const a=e.data();a.id=e.id,t(N(a))})),e.empty&&t(N(x))})).catch((e=>{console.log("Error getting documents: ",e)}))})(e,o))})),()=>{console.log("Clean up")}}));return a.createElement(c,null,a.createElement("div",null,e?a.createElement("button",{onClick:()=>{r.auth().signOut().then((()=>{location.reload()})).catch((e=>{}))}},"ログアウト"):a.createElement("button",{className:"google",onClick:()=>{const e=new r.auth.GoogleAuthProvider;r.auth().signInWithRedirect(e)}},"Googleでログイン"),a.createElement("nav",null,a.createElement("ul",null,a.createElement("li",null,a.createElement(l,{to:"/"},"Home")),a.createElement("li",null,a.createElement(l,{to:"/about"},"About")),a.createElement("li",null,a.createElement(l,{to:"/users"},"Users")))),a.createElement(i,null,a.createElement(g,{path:"/game/:id"},a.createElement(P,null)),a.createElement(g,{path:"/album/:id"},a.createElement(I,null)),a.createElement(g,{path:"/"},e?a.createElement(j,null):a.createElement(G,null)))))}const T=d({reducer:{generationReducer:C,userReducer:v,albumsReducer:w}});u.render(a.createElement(a.StrictMode,null,a.createElement(p,{store:T},a.createElement(_,null))),document.getElementById("root"));
